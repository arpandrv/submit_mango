{% extends 'mango_app/base.html' %}
{% load static %}

{% block title %}Mango Pests and Diseases - Project List{% endblock %}

{% block content %}
<h1 class="mb-4">Mango Pests and Diseases</h1>

<!-- Introduction Card -->
<div class="card mb-4">
    <div class="card-body">
        <h2>About Mango Pests and Diseases</h2>
        <p>This page provides a comprehensive list of common pests and diseases affecting mango trees in Australia.</p>
        <p>Regular surveillance and early detection of these threats are crucial for maintaining tree health, fruit quality, and maximizing yield.</p>
    </div>
</div>

<!-- Filter Controls -->
<div class="mb-4">
    <div class="btn-group" role="group" aria-label="Filter buttons">
        <button id="all-filter" class="btn btn-outline-custom {% if current_filter == 'all' %}active{% endif %}" 
            hx-get="{% url 'mango_app:projects' %}?filter=all" 
            hx-target="#items-container" 
            hx-trigger="click"
            hx-swap="innerHTML"
            hx-push-url="true">All Items</button>
        <button id="pest-filter" class="btn btn-outline-custom {% if current_filter == 'pest' %}active{% endif %}" 
            hx-get="{% url 'mango_app:projects' %}?filter=pest" 
            hx-target="#items-container" 
            hx-trigger="click"
            hx-swap="innerHTML"
            hx-push-url="true">Pests Only</button>
        <button id="disease-filter" class="btn btn-outline-custom {% if current_filter == 'disease' %}active{% endif %}" 
            hx-get="{% url 'mango_app:projects' %}?filter=disease" 
            hx-target="#items-container" 
            hx-trigger="click"
            hx-swap="innerHTML"
            hx-push-url="true">Diseases Only</button>
    </div>
</div>

<!-- Items Container for HTMX updates -->
<div id="items-container">
    {% include "mango_app/partials/item_grid.html" %}
</div>

<!-- Environmental Factors Table (MOVED FROM DISEASES PAGE) -->
<div class="card mb-4">
    <div class="card-header bg-light">
        <h2 class="mb-0">Environmental Factors Affecting Disease Development</h2>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-light">
                    <tr>
                        <th>Disease</th>
                        <th>Temperature</th>
                        <th>Humidity</th>
                        <th>Rainfall</th>
                        <th>Season</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Anthracnose</td>
                        <td>25-28°C</td>
                        <td>High (>80%)</td>
                        <td>High</td>
                        <td>Wet season</td>
                    </tr>
                    <tr>
                        <td>Powdery Mildew</td>
                        <td>20-25°C</td>
                        <td>Low to moderate</td>
                        <td>Low</td>
                        <td>Dry season</td>
                    </tr>
                    <tr>
                        <td>Bacterial Black Spot</td>
                        <td>25-30°C</td>
                        <td>High</td>
                        <td>High</td>
                        <td>Wet season</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}